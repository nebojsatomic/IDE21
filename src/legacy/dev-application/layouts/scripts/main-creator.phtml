<?php
/**
* IDE21 Content Management System
*
* @category   Layouts
* @package    IDE21
*  Copyright (C) 2010-present  Nebojsa Tomic (nebojsatmc@gmail.com)
*
*  This file is part of IDE21.
*
*  IDE21 is distributed in the hope that it will be useful,
*  but WITHOUT ANY WARRANTY; without even the implied warranty of
*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
*
*/
?>
<?php require("css_browser_selector.php"); ?>
<!DOCTYPE html>
<html lang="en" class="<?php echo css_browser_selector() ?> ">
<head>
  <meta name="keywords" content="<?php echo $this->meta_description;?>" />
  <meta name="description" content="<?php echo $this->meta_description;?>" />
  <meta name="generator" content="NeT" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><?php echo $this->title;?> - <?php echo $this->version;?> </title>
  <link rel="stylesheet" href="/css/creator/creator.css" type="text/css" />
  <link rel="stylesheet" href="/css/jdMenu/blue/jquery.jdMenu.css" type="text/css" />
  <link rel="stylesheet" href="/css/default.css" type="text/css" /><!--CSS written in admin panel-->
  <link rel="stylesheet" href="/css/backend.css" type="text/css" /><!--CSS written for the admin panel-->
  <!--treeView-->
  <link rel="stylesheet" href="/css/treeView/jquery.treeview.css" type="text/css" />
  <link rel="stylesheet" href="/css/treeView/screen.css" type="text/css" />
  <!--lightBox-->
  <link rel="stylesheet" href="/css/lightbox/jquery.lightbox-0.5.css" type="text/css" />
  <link rel="stylesheet" href="/css/lightbox/thickbox.css" type="text/css" media="screen" />
  <!--coloris-->
  <link rel="stylesheet" href="/coloris/coloris.min.css"/>
  <link rel="stylesheet" href="/css/default.css" type="text/css" /><!--CSS written in admin panel-->
  <link rel="stylesheet" href="/css/backend.css" type="text/css" /><!--CSS written for the admin panel-->
  <link type="text/css" href="/css/jqUI/ui.all.css" rel="stylesheet" />
  <link type="text/css" href="/css/defaultWidgets.css" rel="stylesheet" />

  <link rel="shortcut icon" type="image/x-icon" href="/images/ide21logo.svg">

  <link href="/daisy/daisyui.full.min.css" rel="stylesheet" type="text/css" />
  <link href="/css/tailwind.output.css?rnd=<?php echo rand();?>" rel="stylesheet" type="text/css" />
  <script src="/daisy/daisyui.tailwind.3.4.3.js"></script>

  <!-- native browser scrollbars are too thin on mobile -->
  <link rel="stylesheet" href="/simplebar/simplebar.css" />
  <script src="/simplebar/simplebar.min.js"></script>

  <script type="text/javascript" >
  absoluteUrl = "<?php echo $this->hostRW;?>";
  daisyAdminTheme = "<?php echo $this->daisyAdminTheme; ?>";
  </script>

  <script src="/js/jquery/jquery-3.7.1.js"></script>
  <script src="/js/jquery/jquery-migrate-3.4.0.js"></script>
  <!--<script type="text/javascript" src="/js/combinedAll.js"></script>-->
  <script type="text/javascript" src="/js/jquery/jquery.ui.js"></script>
  <script type="text/javascript" src="/js/jquery/jquery.livequery.js"></script>

  <script type="text/javascript" src="/js/jquery/ui.draggable.js"></script>
  <script type="text/javascript" src="/js/jquery/ui.droppable.js"></script>
  <script type="text/javascript" src="/js/jquery/ui.resizable.js"></script>

  <script type="text/javascript" src="/js/jquery/jquery.jdMenu.js"></script>
  <script type="text/javascript" src="/js/jquery/jquery.treeview.js"></script>
  <script type="text/javascript" src="/js/jquery/jquery.form.js"></script>

  <script type="text/javascript" src="/js/jquery/alajax.js"></script>
  <!--dialog-->
  <script type="text/javascript" src="/js/jquery/ui.dialog.js"></script>
  <script type="text/javascript" src="/js/jquery/ui.position.js"></script>
  <script type="text/javascript" src="/js/jquery/jquery.ui.touch-punch.min.js"></script>

  <script type="text/javascript" src="/js/jquery/thickbox.js"></script>
  <script type="text/javascript" src="/interactjs/interact.min.js"></script>
  <?php echo $this->headScript(); ?>
</head>
<body id="body" class="overflow-hidden">
  <!-- top panel -->
  <div id="blur-all" class="hidden absolute w-full h-full top-0 backdrop-blur-sm z-[999998]"></div>
  <div data-theme="<?php echo $this->daisyAdminTheme; ?>" class="grid place-content-center fixed -top-[0.5rem] left-2/4 rounded-full bg-neutral hover:bg-accent  z-[999999] btn btn-sm md:btn-xs btn-ghost btn-circle border-2 border-primary">
    <a id="panelToggle" class="help w-4 text-white" href="#" title="<?php echo $this->translate->_("Click to show/hide top panel");?>">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-4">
        <path fill-rule="evenodd" d="M11.47 7.72a.75.75 0 0 1 1.06 0l7.5 7.5a.75.75 0 1 1-1.06 1.06L12 9.31l-6.97 6.97a.75.75 0 0 1-1.06-1.06l7.5-7.5Z" clip-rule="evenodd" />
      </svg>
    </a>
  </div>
  <div data-theme="<?php echo $this->daisyAdminTheme; ?>" id="creator-header-navbar" class="navbar bg-neutral min-h-16 h-16 relative z-[999997] ease-in duration-200">
    <div class="navbar-start flex gap-1 md:gap-2">
      <div id ="contPreview" class="hidden w-full h-auto absolute top-52 left-72 bg-white" style="z-index: 9999999;"></div><!-- z-index must be like this for now, since a lot of interaction with droppables relies on the order of elements, it should be rewritten to something more sensible, for all elements in the admin panel -->
      <div>
        <a id="fsbuttonAll" class="help fsbutton w-8 text-white" href="#" title="<?php echo $this->translate->_("Fullscreen in/out");?>">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
            <path fill-rule="evenodd" d="M15 3.75a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0V5.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l3.97-3.97h-2.69a.75.75 0 0 1-.75-.75Zm-12 0A.75.75 0 0 1 3.75 3h4.5a.75.75 0 0 1 0 1.5H5.56l3.97 3.97a.75.75 0 0 1-1.06 1.06L4.5 5.56v2.69a.75.75 0 0 1-1.5 0v-4.5Zm11.47 11.78a.75.75 0 1 1 1.06-1.06l3.97 3.97v-2.69a.75.75 0 0 1 1.5 0v4.5a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1 0-1.5h2.69l-3.97-3.97Zm-4.94-1.06a.75.75 0 0 1 0 1.06L5.56 19.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 1 1.5 0v2.69l3.97-3.97a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd"></path>
          </svg>
        </a>
      </div>

      <div id="newItem" class="help cursor-pointer btn btn-sm btn-ghost btn-circle text-white" title="<?php echo $this->translate->_("Click to create new object on this page");?>">
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path fill-rule="evenodd" d="M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875ZM12.75 12a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V18a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V12Z" clip-rule="evenodd" />
          <path d="M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z" />
        </svg>
      </div>
      <div id="cloneItem" class="help cursor-pointer btn btn-sm btn-ghost btn-circle text-white" title="<?php echo $this->translate->_("Click to create clone object");?>">
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path fill-rule="evenodd" d="M17.663 3.118c.225.015.45.032.673.05C19.876 3.298 21 4.604 21 6.109v9.642a3 3 0 0 1-3 3V16.5c0-5.922-4.576-10.775-10.384-11.217.324-1.132 1.3-2.01 2.548-2.114.224-.019.448-.036.673-.051A3 3 0 0 1 13.5 1.5H15a3 3 0 0 1 2.663 1.618ZM12 4.5A1.5 1.5 0 0 1 13.5 3H15a1.5 1.5 0 0 1 1.5 1.5H12Z" clip-rule="evenodd" />
          <path d="M3 8.625c0-1.036.84-1.875 1.875-1.875h.375A3.75 3.75 0 0 1 9 10.5v1.875c0 1.036.84 1.875 1.875 1.875h1.875A3.75 3.75 0 0 1 16.5 18v2.625c0 1.035-.84 1.875-1.875 1.875h-9.75A1.875 1.875 0 0 1 3 20.625v-12Z" />
          <path d="M10.5 10.5a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963 5.23 5.23 0 0 0-3.434-1.279h-1.875a.375.375 0 0 1-.375-.375V10.5Z" />
        </svg>
      </div>

      <!--<div id="helpButton" class="help hidden btn btn-sm btn-ghost btn-circle text-white" title="<?php echo $this->translate->_("Click to toggle help");?>"></div>
      <div id="helpDiv"  title=""><?php echo $this->translate->_("NeT.Creator Help");?></div>-->

      <div id="delButton" class="help cursor-pointer btn btn-sm btn-ghost btn-circle text-white" title="<?php echo $this->translate->_("Click to delete selected object");?>">
        <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" >
          <path fill-rule="evenodd" d="M5.625 1.5H9a3.75 3.75 0 0 1 3.75 3.75v1.875c0 1.036.84 1.875 1.875 1.875H16.5a3.75 3.75 0 0 1 3.75 3.75v7.875c0 1.035-.84 1.875-1.875 1.875H5.625a1.875 1.875 0 0 1-1.875-1.875V3.375c0-1.036.84-1.875 1.875-1.875ZM9.75 14.25a.75.75 0 0 0 0 1.5H15a.75.75 0 0 0 0-1.5H9.75Z" clip-rule="evenodd" />
          <path d="M14.25 5.25a5.23 5.23 0 0 0-1.279-3.434 9.768 9.768 0 0 1 6.963 6.963A5.23 5.23 0 0 0 16.5 7.5h-1.875a.375.375 0 0 1-.375-.375V5.25Z" />
        </svg>
      </div>
      
      <!-- <div id="moveProps" class="help" title="<?php echo $this->translate->_("Click to move around properties dialog");?>">
        <button id="upB"></button> <button id="downB"></button>
      </div> -->
    </div>
    <div class="navbar-center hidden sm:flex text-base text-white font-semibold w-40 grid gap-2">
      <div class="truncate"><?php echo $this->loggedUserFullName; ?></div>
      <div> on: </div>
      <div><?php echo str_replace('Ver.', '', $this->version);?></div>
    </div>
    <div class="navbar-end flex gap-2">
      <div id="p_t_common" class="noAjaxEvent grid grid-cols-2 item-strech items-center h-6 w-12 md:w-16 text-white md:px-2">
        <div class="col-span-2 grid-cols-2 grid justify-items-center gap-1">
          <span><input id="pageDisplayer" class="noAjaxEvent help radio-sm" type="radio" name="p_g" value="pageEditing" checked="checked" title="<?php echo $this->translate->_("Page creating Mode");?>" /></span>
          <span><input  id="templateDisplayer" class="noAjaxEvent help radio-sm" type="radio" name="p_g" value="templateEditing" title="<?php echo $this->translate->_("Template creating Mode");?>" /></span>
        </div>
        <div id="p_t-label" class="text-white col-span-2 justify-items-between text-center">
          <span id="p_t-label-page" class="hidden"><?php echo $this->translate->_("Page");?></span>
          <span id="p_t-label-template" class="hidden"><?php echo $this->translate->_("Template");?></span>
        </div>
      </div>
      <div class="dropdown dropdown-end dropdown-hover relative left-1" style="z-index:9;" title="<?php echo $this->translate->_("Preview predefined DaisyUI themes, manage themes by clicking on the plus icon.");?>">
        <div tabindex="0" role="button" class="btn btn-sm min-h-8 h-8 w-8 rounded-full">
          <svg width="12px" height="12px" class="h-2 w-2 fill-current opacity-60 inline-block" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2048 2048"><path d="M1799 349l242 241-1017 1017L7 590l242-241 775 775 775-775z"></path></svg>
        </div>
        <ul id="daisyui-themes-changer" tabindex="0" class="dropdown-content z-[99] p-2 shadow-2xl bg-base-300 rounded-box w-auto">
          <?php echo $this->daisyuiThemes; ?>
          <li>
            <a id="add-new-daisy" class="navLinks help theme-controller btn btn-sm btn-block btn-ghost justify-center text-green-600" title="<?php echo $this->translate->_("Manage DaisyUI themes");?> <?php echo $this->daisyuiVersion; ?>">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
              <path fill-rule="evenodd" d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z" clip-rule="evenodd" />
            </svg>
            </a>
            <div id="daisyui-version-cont" class="text-center"><span>DaisyUI</span> <span id="daisyui-version"><?php echo $this->daisyuiVersion; ?></span></div>
          </li>
        </ul>
      </div>
      <div id="logout" class="help btn btn-sm btn-ghost btn-circle text-white md:mx-2 cursor-pointer" title="<?php echo $this->translate->_("Click to logout");?>">
        <a id="logout_a" class="a_logout" href="<?php echo $this->host;?>creator/logout" >
          <svg class="w-6 h-6 rotate-180" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path fill-rule="evenodd" d="M16.5 3.75a1.5 1.5 0 0 1 1.5 1.5v13.5a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5V15a.75.75 0 0 0-1.5 0v3.75a3 3 0 0 0 3 3h6a3 3 0 0 0 3-3V5.25a3 3 0 0 0-3-3h-6a3 3 0 0 0-3 3V9A.75.75 0 1 0 9 9V5.25a1.5 1.5 0 0 1 1.5-1.5h6ZM5.78 8.47a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 0 0 0 1.06l3 3a.75.75 0 0 0 1.06-1.06l-1.72-1.72H15a.75.75 0 0 0 0-1.5H4.06l1.72-1.72a.75.75 0 0 0 0-1.06Z" clip-rule="evenodd" />
          </svg>
        </a>
      </div>
    </div>
  </div>
  <!-- end top panel -->

  <div id="ajax-loader"></div>
  <div data-theme="<?php echo $this->daisyAdminTheme; ?>" id="dialogDiv" class="bg-primary text-primary-content"></div>
  <div id ="container">
    <div id="content">
      <div id="templateMask"></div>
      <?php
      echo $this->layout()->content;
      ?>
    </div>
  </div>
  <script src="/coloris/coloris.min.js"></script>

  <script src="/ace/src-min/ace.js" type="text/javascript" charset="utf-8"></script>
  <script src="/ace/src-min/ext-language_tools.js"></script>
  <script>
      var editorHTML = ace.edit("objectHTML-ace");
      editorHTML.setTheme("ace/theme/chrome");
      editorHTML.session.setMode("ace/mode/html");

      editorHTML.setOptions({
        wrap: true,
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: true
      });
      editorHTML.session.on('change', function(delta){
        $('#objPropertiesHtmlSelected').val( editorHTML.getValue() );
        setTimeout( function(){ // use timeout to wait for the selected object events completion
          $('#' + $('#objIDshow').text()).replaceWith( editorHTML.getValue() );
        }, 200 );
      });

      var editorCSS = ace.edit("pageCSS-ace");
      editorCSS.setTheme("ace/theme/chrome");
      editorCSS.session.setMode("ace/mode/css");

      editorCSS.setOptions({
        wrap: true,
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: true
      });

      var editorJS = ace.edit("pageJS-ace");
      editorJS.setTheme("ace/theme/chrome");
      editorJS.session.setMode("ace/mode/javascript");

      editorJS.setOptions({
        wrap: true,
        enableBasicAutocompletion: true,
        enableSnippets: true,
        enableLiveAutocompletion: true
      });
  </script>
</body>
</html>
